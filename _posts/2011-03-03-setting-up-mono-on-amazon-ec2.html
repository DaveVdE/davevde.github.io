---
layout: post
title: Setting up Mono on Amazon EC2
date: '2011-03-03T22:01:00.001+01:00'
author: Dave Van den Eynde
tags: 
modified_time: '2011-03-09T17:35:49.707+01:00'
blogger_id: tag:blogger.com,1999:blog-10546079.post-7733354232979735269
blogger_orig_url: http://www.groovbird.com/2011/03/setting-up-mono-on-amazon-ec2.html
---

A while ago I managed to set up <a href="http://www.mono-project.com/">Mono</a> on an <a href="http://aws.amazon.com/ec2/">Amazon EC2</a> instance running the standard <a href="http://aws.amazon.com/amazon-linux-ami/">Amazon Linux AMI</a>, by compiling from sources. Boy, that was a pain, took a while (I was stupid enough to do it on a Micro instance) and turned out to be totally unnecessary.  <br />  <br />Today I found a better way to do it, thanks to <a href="http://stackoverflow.com/questions/3510320/install-mono-on-centos5-5-using-yum">this post</a> on StackOverflow. You'll have to modify the steps that the poster follows, though, mostly because you can't log in as root on an Amazon Linux instance, but everything is available using sudo.  <br />  <br />First you have to set up an instance (use a Large instance, you won't regret it), and the easiest way to do that is through the Amazon Management Console. Once you have your instance running and you can log in, do the following:  <br />  <br />First, add the official Mono repository to yum. I'm quite new to yum, but the SO post made it quite clear. In your home directory, issue the command 'vi mono.repo', and press 'i' to enter 'insert mode', then paste the following snippet:  <br />  <br /><span style="line-height: 18px; border-collapse: collapse; font-family: arial, &#39;Liberation Sans&#39;, &#39;DejaVu Sans&#39;, sans-serif; font-size: 14px" class="Apple-style-span"></span>  <br />  <pre style="padding-bottom: 5px; border-right-width: 0px; overflow-x: auto; overflow-y: auto; background-color: #eeeeee; margin: 0px 0px 10px; padding-left: 5px; width: auto; padding-right: 5px; font-family: consolas, menlo, monaco, &#39;Lucida Console&#39;, &#39;Liberation Mono&#39;, &#39;DejaVu Sans Mono&#39;, &#39;Bitstream Vera Sans Mono&#39;, &#39;Courier New&#39;, monospace, serif; border-top-width: 0px; border-bottom-width: 0px; max-height: 600px; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 5px; background-clip: initial; background-origin: initial" class="default prettyprint"><code style="padding-bottom: 0px; border-right-width: 0px; background-color: #eeeeee; margin: 0px; padding-left: 0px; padding-right: 0px; font-family: consolas, menlo, monaco, &#39;Lucida Console&#39;, &#39;Liberation Mono&#39;, &#39;DejaVu Sans Mono&#39;, &#39;Bitstream Vera Sans Mono&#39;, &#39;Courier New&#39;, monospace, serif; border-top-width: 0px; border-bottom-width: 0px; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial"><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pun">[</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: #2b91af; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="typ">Mono</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pun">]</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pln">
name</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pun">=</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: #2b91af; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="typ">Mono</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pln"> </span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: #2b91af; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="typ">Stack</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pln"> </span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pun">(</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pln">RHEL_5</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pun">)</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pln">
type</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pun">=</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pln">rpm</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pun">-</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pln">md
baseurl</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pun">=</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pln">http</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pun">:</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: grey; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="com">//ftp.novell.com/pub/mono/download-stable/RHEL_5/</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pln">
gpgcheck</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pun">=</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: maroon; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="lit">1</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pln">
gpgkey</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pun">=</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pln">http</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pun">:</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: grey; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="com">//ftp.novell.com/pub/mono/download-stable/RHEL_5/repodata/repomd.xml.key</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pln">
enabled</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: black; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="pun">=</span><span style="padding-bottom: 0px; border-right-width: 0px; background-color: transparent; margin: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; color: maroon; font-size: 14px; vertical-align: baseline; border-left-width: 0px; padding-top: 0px; background-clip: initial; background-origin: initial" class="lit">1</span></code></pre>

<br />Then, press the 'escape' key, and type ':w' and ':q'. I'm not used to vi, but I know it's on there and this happens to work. Now you have the repo file in your home directory and you need to move it to the /etc/yum.repos.d directory, but only root can do that, so issue the command 'sudo mv mono.repo /etc/yum.repos.d'.

<br />

<br />Next, you'll need to clear the cache using 'sudo yum clean' and install the Mono stack using 'sudo yum install monotools-addon-server'. That will install the latest stable version of Mono, currently 2.10.1.

<br />

<br />You can do this on a Large instance and make it quicker, then shutdown your instance, make a snapshot, terminate the instance and make a new 'Micro' instance using the instance and you'll be set up. For some funny reason Micro instances are 64-bit and Large instances are too, but Normal instances are 32-bit only.

<br />

<br />Now I have to figure out how to set up a decent web server so I can try to get ASP.NET MVC going.

<p><strong>UPDATE</strong>: I definitely needed the following to make ASP.NET MVC work: I had to install WCF, by issuing this command: ‘sudo yum install mono-addon-wcf’. The mod_mono module is autohosting, which means that when installed, it automatically loads so ASP.NET should work out of the box, and the example site is located at /opt/novell/mono/lib/xsp/test.</p>  